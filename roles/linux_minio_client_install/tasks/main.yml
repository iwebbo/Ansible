---
- name: "ğŸ§  DÃ©tection distribution"
  ansible.builtin.debug:
    msg: "OS={{ ansible_facts.os_family }} / Distro={{ ansible_facts.distribution }}"

- name: "ğŸ“¦ Installer MinIO client - Debian/Ubuntu"
  include_tasks: install_deb.yml
  when: ansible_facts.os_family == "Debian"

- name: "ğŸ“¦ Installer MinIO client - RedHat/CentOS"
  include_tasks: install_rpm.yml
  when: ansible_facts.os_family == "RedHat"

- name: "â¬‡ï¸ Installer MinIO client via binaire curl (fallback)"
  include_tasks: install_binary.yml
  when: >
    ansible_facts.os_family not in ["RedHat", "Debian"]

- name: "ğŸ“ CrÃ©er ~/.mc"
  file:
    path: "{{ minio_client_config_dir }}"
    state: directory
    mode: "0700"
